<body>
    <div class="page-wrap">
    <!-- Top bar for authentication links -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-links">
                
                    <a href="/login" class="top-bar-link">Sign In / Create Account</a>
                    
            </div>
        </div>
    </div>

    <!-- Light pink navbar with links -->
    <nav class="navbar navbar-expand-md navbar-light">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="/images/ella_logo.avif" alt="Ella Rises Logo">
                <span>Ella Rises</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent" aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navContent">
                <ul class="navbar-nav ms-auto mb-2 mb-md-0">
                    
                            <li class="nav-item">
                                <a class="nav-link" href="/events">Events</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/survey">Event Feedback</a>
                            </li>
                            
                                    
                                            <li class="nav-item">
                                                <a class="nav-link" href="/donations">Donations</a>
                                            </li>
                                            
                </ul>
            </div>
        </div>
    </nav>

    <!-- Events Header -->
    <div class="events-header">
        <h1>EVENTS</h1>
        <p>Join us for inspiring workshops, creative experiences, and leadership opportunities that empower the rising
            generation of women in STEAM fields.</p>
    </div>

    <!-- Events Filters -->
    <div class="events-filters">
        <div class="filters-title">Filter Events</div>
        <div class="filters-row">
            <div class="filter-group">
                <label for="event-type">Event Type</label>
                <select id="event-type" class="event-filter">
                    <option value="all">All Event Types</option>
                    <option value="Leadership">Leadership</option>
                    <option value="STEM">STEM</option>
                    <option value="Arts">Arts</option>
                    <option value="Annual Conference">Annual Conference</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="event-recurrence">Recurrence Pattern</label>
                <select id="event-recurrence" class="event-filter">
                    <option value="all">All Patterns</option>
                    <option value="Monthly">Monthly</option>
                    <option value="Weekly">Weekly</option>
                    <option value="Annual">Annual</option>
                </select>
            </div>
            <div class="filter-buttons">
                <button class="filter-btn" onclick="clearFilters()">Clear Filters</button>
            </div>
        </div>
    </div>

    <!-- Manager Controls -->
    

            <!-- Events Grid -->
            <div class="events-container">
                <div class="events-grid">
                    
                        
                                <div class="event-card-wrapper" data-event-id="12" data-event-type="STEM" data-event-recurrence="Monthly" data-event-capacity="60" data-date="upcoming">
                                    
                                            <a href="/rsvp/12" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_12_real.jpeg" alt="AI for Beginners Bootcamps" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        AI for Beginners Bootcamps
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Intro to AI concepts and Python-based tools for young learners.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="14" data-event-type="STEM" data-event-recurrence="Monthly" data-event-capacity="120" data-date="upcoming">
                                    
                                            <a href="/rsvp/14" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_14_real.jpeg" alt="Community STEM Hackathon" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Community STEM Hackathon
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Collaborative, problem-solving challenges in coding and engineering.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="6" data-event-type="STEM" data-event-recurrence="Weekly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/6" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_6_real.jpeg" alt="Data Science Study Group" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Data Science Study Group
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Intro analytics, Python challenges, and mini-projects.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="13" data-event-type="Arts" data-event-recurrence="Weekly" data-event-capacity="40" data-date="upcoming">
                                    
                                            <a href="/rsvp/13" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_13_real.jpg" alt="                                                        Digital Design Workshop                                                    " style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                                                                                Digital Design Workshop                                                    
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Graphic design, UX/UI basics, and creative tech projects.
                                                        
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="9" data-event-type="Annual Conference" data-event-recurrence="Annual" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/9" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_9_real.jpg" alt="Ella Rises Annual Leadership Conference" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Ella Rises Annual Leadership Conference
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Flagship leadership &amp; inspiration conference for girls in STEAM.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="3" data-event-type="Leadership" data-event-recurrence="Weekly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/3" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_3_real.jpeg" alt="Girls in STEAM Mentoring" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Girls in STEAM Mentoring
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Group mentoring on pathways into STEAM careers.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="5" data-event-type="Arts" data-event-recurrence="Weekly" data-event-capacity="100" data-date="upcoming">
                                    
                                            <a href="/rsvp/5" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_5_real.jpg" alt="Intro to Painting Class" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Intro to Painting Class
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Foundations of painting, color theory, and practice.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="7" data-event-type="Leadership" data-event-recurrence="Monthly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/7" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_7_real.jpg" alt="Leadership Circle Meetup" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Leadership Circle Meetup
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Mentorship, goal-setting, and soft skills workshops.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="1" data-event-type="Leadership" data-event-recurrence="Weekly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/1" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_1_real.jpg" alt="Mentor Office Hours" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Mentor Office Hours
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            One-on-one mentoring &amp; career advising.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="10" data-event-type="Arts" data-event-recurrence="Monthly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/10" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_10_real.jpg" alt="Monthly Art Studio Workshop" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Monthly Art Studio Workshop
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Studio time with rotating media and guest artists.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="4" data-event-type="STEM" data-event-recurrence="Monthly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/4" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_4_real.JPG" alt="Monthly Coding Club" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Monthly Coding Club
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Guided coding sessions and peer projects.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="2" data-event-type="STEM" data-event-recurrence="Weekly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/2" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_2_real.jpg" alt="Robotics Lab Saturday" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Robotics Lab Saturday
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Build &amp; test robots with mentors.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="11" data-event-type="Annual Conference" data-event-recurrence="Annual" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/11" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_11_real.JPG" alt="STEAM Summit &amp; Expo" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        STEAM Summit &amp; Expo
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Hands-on exhibits, talks, and project showcases across STEAM.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="8" data-event-type="STEM" data-event-recurrence="Weekly" data-event-capacity="100" data-date="past">
                                    
                                            <a href="/rsvp/8" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_8_real.jpeg" alt="Web Dev Bootcamp Night" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Web Dev Bootcamp Night
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            HTML/CSS/JS sprints and portfolio building.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                <div class="event-card-wrapper" data-event-id="15" data-event-type="Annual Conference" data-event-recurrence="Annual" data-event-capacity="500" data-date="upcoming">
                                    
                                            <a href="/rsvp/15" class="event-card">
                                                <div class="event-image">
                                                    
                                                        <img src="/images/event_15_real.jpeg" alt="Women in Tech &amp; Art Showcase" style="width: 100%; height: 100%; object-fit: cover;">
                                                        
                                                </div>
                                                <div class="event-content">
                                                    <div class="event-name">
                                                        Women in Tech &amp; Art Showcase
                                                    </div>
                                                    <div class="event-description">
                                                        <span class="event-description-text">
                                                            Celebration of female innovation across STEAM industries.
                                                        </span>
                                                    </div>
                                                </div>
                                            </a>
                                </div>
                                
                                    
                </div>
            </div>

            <!-- Event Modal -->
            

                    <!-- Footer -->
                    <footer>
                        <div class="footer-content">
                            <div class="footer-main">
                                <div class="footer-left">
                                    <div class="footer-logo">
                                        <img src="/images/ella_logo.avif" alt="Ella Rises Logo">
                                        <span>Ella Rises</span>
                                    </div>
                                    <p>
                                        Empowering the rising generation of women to pursue higher education
                                        and embrace their heritage through STEAM programs, mentoring, and
                                        leadership opportunities.
                                    </p>
                                </div>

                                <div class="footer-divider"></div>

                                <div class="footer-right">
                                    <h4>Contact</h4>
                                    <p>Visit us at:</p>
                                    <p><a href="https://www.ellarises.org/" target="_blank">www.ellarises.org</a></p>
                                    <div class="social-links">
                                        <a href="https://www.instagram.com/ellarises/" target="_blank" class="social-link">
                                            <svg class="social-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.98-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.98-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path>
                                            </svg>
                                            <span>Instagram</span>
                                        </a>
                                        <a href="https://www.facebook.com/EllaRises" target="_blank" class="social-link">
                                            <svg class="social-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
                                            </svg>
                                            <span>Facebook</span>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="footer-bottom">
                                <p>© 2025 Ella Rises. All rights reserved.</p>
                            </div>
                        </div>
                    </footer>
    </div>

                    <!-- Bootstrap JS -->
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

                    <!-- Set manager status (server-side variable) -->
                    <script>
                        var isManager = "false" === 'true';
                    </script>

                    <!-- Filter Functionality -->
                    <script>

                        // Load persisted events data from localStorage
                        function loadPersistedEvents() {
                            const eventsData = localStorage.getItem('eventsData');
                            if (eventsData) {
                                return JSON.parse(eventsData);
                            }
                            return null;
                        }

                        function savePersistedEvents(events) {
                            localStorage.setItem('eventsData', JSON.stringify(events));
                        }

                        function getEventDataFromDOM() {
                            const events = [];
                            document.querySelectorAll('.event-card-wrapper').forEach(wrapper => {
                                const eventId = wrapper.getAttribute('data-event-id');
                                const eventName = wrapper.querySelector('.event-name')?.textContent || '';
                                const eventDescription = wrapper.querySelector('.event-description-text')?.textContent || '';
                                const eventType = wrapper.getAttribute('data-event-type') || '';
                                const eventRecurrence = wrapper.getAttribute('data-event-recurrence') || '';

                                events.push({
                                    id: eventId,
                                    name: eventName,
                                    description: eventDescription,
                                    type: eventType,
                                    recurrence: eventRecurrence
                                });
                            });
                            return events;
                        }

                        function createEventCardHTML(event, eventId) {
                            const escapedName = event.name.replace(/'/g, "\\'").replace(/"/g, '&quot;');
                            if (isManager) {
                                return `
                    <button class="event-card-edit-btn" onclick="openEditEventModal(${eventId})" title="Edit Event">✎</button>
                    <button class="event-card-delete-btn" onclick="confirmDeleteEvent(${eventId}, '${escapedName}')" title="Delete Event">×</button>
                    <a href="/rsvp" class="event-card">
                        <div class="event-image">Image placeholder</div>
                        <div class="event-content">
                            <div class="event-name">${event.name}</div>
                            <div class="event-description">
                                <span class="event-description-text">${event.description}</span>
                            </div>
                        </div>
                    </a>
                `;
                            } else {
                                return `
                    <a href="/rsvp" class="event-card">
                        <div class="event-image">Image placeholder</div>
                        <div class="event-content">
                            <div class="event-name">${event.name}</div>
                            <div class="event-description">
                                <span class="event-description-text">${event.description}</span>
                            </div>
                        </div>
                    </a>
                `;
                            }
                        }

                        function applyPersistedEvents() {
                            const persistedEvents = loadPersistedEvents();
                            if (!persistedEvents) return;

                            const eventsGrid = document.querySelector('.events-grid');
                            if (!eventsGrid) return;

                            // Remove all existing events
                            document.querySelectorAll('.event-card-wrapper').forEach(wrapper => {
                                wrapper.remove();
                            });

                            // Rebuild events from persisted data
                            persistedEvents.forEach(event => {
                                const eventId = event.id;
                                const wrapper = document.createElement('div');
                                wrapper.className = 'event-card-wrapper';
                                wrapper.setAttribute('data-event-id', eventId);
                                wrapper.setAttribute('data-type', event.type);
                                wrapper.setAttribute('data-category', event.category);
                                wrapper.setAttribute('data-date', 'upcoming');
                                wrapper.innerHTML = createEventCardHTML(event, eventId);
                                eventsGrid.appendChild(wrapper);
                            });
                        }

                        document.addEventListener('DOMContentLoaded', function () {
                            // Don't load persisted events - use database events instead
                            // Only use localStorage for manager edits (add/edit/delete) if needed
                            // Clear old localStorage data to prevent conflicts
                            localStorage.removeItem('eventsData');

                            const eventTypeFilter = document.getElementById('event-type');
                            const eventRecurrenceFilter = document.getElementById('event-recurrence');
                            const eventCardWrappers = document.querySelectorAll('.event-card-wrapper');

                            function filterEvents() {
                                const typeValue = eventTypeFilter.value.trim();
                                const recurrenceValue = eventRecurrenceFilter.value.trim();

                                eventCardWrappers.forEach(wrapper => {
                                    const cardType = (wrapper.getAttribute('data-event-type') || '').trim();
                                    const cardRecurrence = (wrapper.getAttribute('data-event-recurrence') || '').trim();

                                    let showCard = true;

                                    // Filter by event type (exact match, case-sensitive)
                                    // Values must be: Leadership, STEM, Arts, Annual Conference
                                    if (typeValue !== 'all') {
                                        if (cardType !== typeValue) {
                                            showCard = false;
                                        }
                                    }

                                    // Filter by recurrence pattern (exact match, case-sensitive)
                                    // Values must be: Monthly, Weekly, Annual
                                    if (recurrenceValue !== 'all') {
                                        if (cardRecurrence !== recurrenceValue) {
                                            showCard = false;
                                        }
                                    }

                                    // Show or hide card
                                    if (showCard) {
                                        wrapper.style.display = 'block';
                                    } else {
                                        wrapper.style.display = 'none';
                                    }
                                });
                            }

                            // Add event listeners
                            eventTypeFilter.addEventListener('change', filterEvents);
                            eventRecurrenceFilter.addEventListener('change', filterEvents);

                            // Clear filters function
                            window.clearFilters = function () {
                                eventTypeFilter.value = 'all';
                                eventRecurrenceFilter.value = 'all';
                                filterEvents();
                            };
                        });

                        // Manager Functions
                        function openAddEventModal() {
                            document.getElementById('eventModalTitle').textContent = 'Add New Event';
                            document.getElementById('eventForm').reset();
                            document.getElementById('eventForm').setAttribute('data-mode', 'add');
                            document.getElementById('eventForm').removeAttribute('data-event-id');
                            const modal = new bootstrap.Modal(document.getElementById('eventModal'));
                            modal.show();
                        }

                        function openEditEventModal(eventId) {
                            // Get event data from the card
                            const wrapper = document.querySelector(`[data-event-id="${eventId}"]`);
                            if (!wrapper) return;

                            const eventName = wrapper.querySelector('.event-name').textContent;
                            const eventDescription = wrapper.querySelector('.event-description-text').textContent;
                            const eventType = wrapper.getAttribute('data-event-type');
                            const eventRecurrence = wrapper.getAttribute('data-event-recurrence');
                            const eventCapacity = wrapper.getAttribute('data-event-capacity');

                            // Populate form
                            document.getElementById('eventModalTitle').textContent = 'Edit Event';
                            document.getElementById('eventName').value = eventName;
                            document.getElementById('eventDescription').value = eventDescription;
                            document.getElementById('modalEventType').value = eventType || '';
                            document.getElementById('modalEventRecurrence').value = eventRecurrence || '';

                            // Set capacity - handle both string and number values
                            const capacityValue = eventCapacity && eventCapacity.trim() !== '' ? eventCapacity : '';
                            document.getElementById('eventDefaultCapacity').value = capacityValue;

                            document.getElementById('eventForm').setAttribute('data-mode', 'edit');
                            document.getElementById('eventForm').setAttribute('data-event-id', eventId);

                            const modal = new bootstrap.Modal(document.getElementById('eventModal'));
                            modal.show();
                        }

                        function deleteEvent(eventId) {
                            // Delete event from database
                            fetch(`/events/delete/${eventId}`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/x-www-form-urlencoded',
                                }
                            })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        // Remove the event card from the DOM
                                        const wrapper = document.querySelector(`[data-event-id="${eventId}"]`);
                                        if (wrapper) {
                                            wrapper.style.transition = 'opacity 0.3s';
                                            wrapper.style.opacity = '0';
                                            setTimeout(() => {
                                                wrapper.remove();
                                                alert('Event deleted successfully!');
                                            }, 300);
                                        } else {
                                            alert('Event deleted successfully! Refreshing page...');
                                            window.location.reload();
                                        }
                                    } else {
                                        alert('Error: ' + (data.error || 'Failed to delete event'));
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('Error deleting event. Please try again.');
                                });
                        }

                        function confirmDeleteEvent(eventId, eventName) {
                            if (confirm(`Are you sure you want to delete "${eventName}"?\n\nThis action cannot be undone.`)) {
                                deleteEvent(eventId);
                            }
                        }

                        function handleEventSubmit(event) {
                            event.preventDefault();
                            const form = event.target;
                            const mode = form.getAttribute('data-mode');
                            const eventId = form.getAttribute('data-event-id');

                            const eventName = document.getElementById('eventName').value;
                            const eventDescription = document.getElementById('eventDescription').value;
                            const eventType = document.getElementById('modalEventType').value;
                            const eventRecurrence = document.getElementById('modalEventRecurrence').value;
                            const eventDefaultCapacity = document.getElementById('eventDefaultCapacity').value;

                            if (mode === 'add') {
                                // Add new event to database
                                fetch('/events/add', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/x-www-form-urlencoded',
                                    },
                                    body: new URLSearchParams({
                                        eventName: eventName,
                                        eventDescription: eventDescription,
                                        eventType: eventType,
                                        eventRecurrencePattern: eventRecurrence,
                                        eventDefaultCapacity: eventDefaultCapacity
                                    })
                                })
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.success) {
                                            alert('Event added successfully! Refreshing page...');
                                            window.location.reload();
                                        } else {
                                            alert('Error: ' + (data.error || 'Failed to add event'));
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error:', error);
                                        alert('Error adding event. Please try again.');
                                    });
                            } else if (mode === 'edit') {
                                // Update existing event in database
                                fetch(`/events/edit/${eventId}`, {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/x-www-form-urlencoded',
                                    },
                                    body: new URLSearchParams({
                                        eventName: eventName,
                                        eventDescription: eventDescription,
                                        eventType: eventType,
                                        eventRecurrencePattern: eventRecurrence,
                                        eventDefaultCapacity: eventDefaultCapacity
                                    })
                                })
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.success) {
                                            alert('Event updated successfully! Refreshing page...');
                                            window.location.reload();
                                        } else {
                                            alert('Error: ' + (data.error || 'Failed to update event'));
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error:', error);
                                        alert('Error updating event. Please try again.');
                                    });
                            }

                            const modal = bootstrap.Modal.getInstance(document.getElementById('eventModal'));
                            modal.hide();
                        }
                    </script>


</body>